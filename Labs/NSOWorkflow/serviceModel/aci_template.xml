[root@dmz-nso01 src]# cat ../templates/aci-template.xml
<config-template xmlns="http://tail-f.com/ns/config/1.0">
   <devices xmlns="http://tail-f.com/ns/ncs">
      <device>
         <name>{/sdn-controller/device-name}</name>
         <config>
            <apic xmlns="http://tail-f.com/ned/cisco-apicdc">
               <fvTenant>
                  <name>{/sdn-controller/tenant/name}</name>
                  <!-- Logical device cluster -->
                  <vnsLDevVip>
                     <name>{/sdn-controller/tenant/vns-ldev-vip/name}</name>
                     <contextAware>single-Context</contextAware>
                     <devtype>VIRTUAL</devtype>
                     <funcType>GoTo</funcType>
                     <isCopy>no</isCopy>
                     <managed>no</managed>
                     <mode>legacy-Mode</mode>
                     <promMode>no</promMode>
                     <svcType>ADC</svcType>
                     <trunking>no</trunking>
                     <vnsRsALDevToDomP>
                        <tDn>uni/vmmp-VMware/dom-{/sdn-controller/tenant/vns-ldev-vip/domain-name}</tDn>
                     </vnsRsALDevToDomP>
                     <vnsLIf>
                        <name>consumer</name>
                        <encap>unknown</encap>
                        <vnsRsCIfAttN>
                           <tDn>uni/tn-{/sdn-controller/tenant/name}/lDevVip-{/sdn-controller/tenant/vns-ldev-vip/name}/cDev-Device1/cIf-[1_1]</tDn>
                        </vnsRsCIfAttN>
                     </vnsLIf>
                     <vnsLIf>
                        <name>provider</name>
                        <encap>unknown</encap>
                        <vnsRsCIfAttN>
                           <tDn>uni/tn-{/sdn-controller/tenant/name}/lDevVip-{/sdn-controller/tenant/vns-ldev-vip/name}/cDev-Device1/cIf-[1_1]</tDn>
                        </vnsRsCIfAttN>
                     </vnsLIf>
                     <vnsCDev>
                        <name>Device1</name>
                        <vcenterName>DMZ_VC</vcenterName>
                        <vmName>{/sdn-controller/tenant/vns-ldev-vip/vm-name}</vmName>
                        <vnsCIf>
                           <name>1_1</name>
                           <vnicName>Network adapter 2</vnicName>
                        </vnsCIf>
                        <vnsCCredSecret>
                           <name>password</name>
                        </vnsCCredSecret>
                        <vnsCCred>
                           <name>username</name>
                           <value>a</value>
                        </vnsCCred>
                     </vnsCDev>
                  </vnsLDevVip>
                  <!-- Service graph template -->
                  <vnsAbsGraph>
                     <name>{/sdn-controller/tenant/vns-abs-graph/name}</name>
                     <uiTemplateType>UNSPECIFIED</uiTemplateType>
                     <vnsAbsTermNodeProv>
                        <name>T2</name>
                        <vnsAbsTermConn>
                           <attNotify>no</attNotify>
                           <name>1</name>
                        </vnsAbsTermConn>
                     </vnsAbsTermNodeProv>
                     <vnsAbsTermNodeCon>
                        <name>T1</name>
                        <vnsAbsTermConn>
                           <attNotify>no</attNotify>
                           <name>1</name>
                        </vnsAbsTermConn>
                     </vnsAbsTermNodeCon>
                     <vnsAbsNode>
                        <name>ADC</name>
                        <funcTemplateType>{/sdn-controller/tenant/vns-abs-graph/template-type}</funcTemplateType>
                        <funcType>GoTo</funcType>
                        <isCopy>no</isCopy>
                        <managed>no</managed>
                        <routingMode>unspecified</routingMode>
                        <sequenceNumber>0</sequenceNumber>
                        <shareEncap>no</shareEncap>
                        <vnsRsNodeToLDev>
                           <tDn>uni/tn-{/sdn-controller/tenant/name}/lDevVip-{/sdn-controller/tenant/vns-ldev-vip/name}</tDn>
                        </vnsRsNodeToLDev>
                        <vnsAbsFuncConn>
                           <name>consumer</name>
                           <attNotify>no</attNotify>
                        </vnsAbsFuncConn>
                        <vnsAbsFuncConn>
                           <name>provider</name>
                           <attNotify>no</attNotify>
                        </vnsAbsFuncConn>
                     </vnsAbsNode>
                     <vnsAbsConnection>
                        <name>C1</name>
                        <adjType>L3</adjType>
                        <connDir>provider</connDir>
                        <connType>external</connType>
                        <directConnect>no</directConnect>
                        <unicastRoute>yes</unicastRoute>
                        <vnsRsAbsConnectionConns>
                           <tDn>uni/tn-{/sdn-controller/tenant/name}/AbsGraph-{/sdn-controller/tenant/vns-abs-graph/name}/AbsNode-ADC/AbsFConn-consumer</tDn>
                        </vnsRsAbsConnectionConns>
                        <vnsRsAbsConnectionConns>
                           <tDn>uni/tn-{/sdn-controller/tenant/name}/AbsGraph-{/sdn-controller/tenant/vns-abs-graph/name}/AbsTermNodeCon-T1/AbsTConn</tDn>
                        </vnsRsAbsConnectionConns>
                     </vnsAbsConnection>
                     <vnsAbsConnection>
                        <name>C2</name>
                        <adjType>L3</adjType>
                        <connDir>provider</connDir>
                        <connType>external</connType>
                        <directConnect>no</directConnect>
                        <unicastRoute>yes</unicastRoute>
                        <vnsRsAbsConnectionConns>
                           <tDn>uni/tn-{/sdn-controller/tenant/name}/AbsGraph-{/sdn-controller/tenant/vns-abs-graph/name}/AbsNode-ADC/AbsFConn-provider</tDn>
                        </vnsRsAbsConnectionConns>
                        <vnsRsAbsConnectionConns>
                           <tDn>uni/tn-{/sdn-controller/tenant/name}/AbsGraph-{/sdn-controller/tenant/vns-abs-graph/name}/AbsTermNodeProv-T2/AbsTConn</tDn>
                        </vnsRsAbsConnectionConns>
                     </vnsAbsConnection>
                  </vnsAbsGraph>
                  <!-- Device selection policy -->
                  <vnsLDevCtx>
                     <ctrctNameOrLbl>{/sdn-controller/tenant/contract-name}</ctrctNameOrLbl>
                     <graphNameOrLbl>{/sdn-controller/tenant/vns-abs-graph/name}</graphNameOrLbl>
                     <nodeNameOrLbl>ADC</nodeNameOrLbl>
                     <vnsRsLDevCtxToLDev>
                        <tDn>uni/tn-{/sdn-controller/tenant/name}/lDevVip-{/sdn-controller/tenant/vns-ldev-vip/name}</tDn>
                     </vnsRsLDevCtxToLDev>
                     <vnsLIfCtx>
                        <connNameOrLbl>consumer</connNameOrLbl>
                        <permitLog>no</permitLog>
                        <vnsRsLIfCtxToLIf>
                           <tDn>uni/tn-{/sdn-controller/tenant/name}/lDevVip-{/sdn-controller/tenant/vns-ldev-vip/name}/lIf-provider</tDn>
                        </vnsRsLIfCtxToLIf>
                        <vnsRsLIfCtxToBD>
                           <tDn>uni/tn-{/sdn-controller/tenant/name}/BD-{/sdn-controller/tenant/bd-consumer-name}</tDn>
                        </vnsRsLIfCtxToBD>
                     </vnsLIfCtx>
                     <vnsLIfCtx>
                        <connNameOrLbl>provider</connNameOrLbl>
                        <permitLog>no</permitLog>
                        <vnsRsLIfCtxToLIf>
                           <tDn>uni/tn-{/sdn-controller/tenant/name}/lDevVip-{/sdn-controller/tenant/vns-ldev-vip/name}/lIf-provider</tDn>
                        </vnsRsLIfCtxToLIf>
                        <vnsRsLIfCtxToBD>
                           <tDn>uni/tn-{/sdn-controller/tenant/name}/BD-{/sdn-controller/tenant/bd-provider-name}</tDn>
                        </vnsRsLIfCtxToBD>
                     </vnsLIfCtx>
                  </vnsLDevCtx>
                  <!-- Apply graph to Contract -->
                  <vzBrCP>
                     <name>{/sdn-controller/tenant/contract-name}</name>
                     <vzSubj>
                        <name>all</name>
                        <vzRsSubjFiltAtt>
                           <tnVzFilterName>default</tnVzFilterName>
                        </vzRsSubjFiltAtt>
                        <vzRsSubjGraphAtt>
                           <tnVnsAbsGraphName>{/sdn-controller/tenant/vns-abs-graph/name}</tnVnsAbsGraphName>
                        </vzRsSubjGraphAtt>
                     </vzSubj>
                  </vzBrCP>
                  <!-- Attach provider and consumer contract to EPGs -->
                  <l3extOut>
                     <name>{/sdn-controller/tenant/name}-l3out</name>
                     <l3extInstP>
                        <name>{/sdn-controller/tenant/epg-consumer-name}</name>
                        <targetDscp>unspecified</targetDscp>
                        <matchT>AtleastOne</matchT>
                        <prio>unspecified</prio>
                        <fvRsCons>
                           <tnVzBrCPName>{/sdn-controller/tenant/contract-name}</tnVzBrCPName>
                           <prio>unspecified</prio>
                        </fvRsCons>
                        <l3extSubnet>
                           <ip>0.0.0.0/0</ip>
                           <scope>import-security</scope>
                        </l3extSubnet>
                     </l3extInstP>
                  </l3extOut>
                  <fvAp>
                     <name>{/sdn-controller/tenant/application-profile-name}</name>
                     <fvAEPg>
                        <name>{/sdn-controller/tenant/epg-provider-name}</name>
                        <fvRsProv>
                           <tnVzBrCPName>{/sdn-controller/tenant/contract-name}</tnVzBrCPName>
                        </fvRsProv>
                     </fvAEPg>
                  </fvAp>
               </fvTenant>
            </apic>
         </config>
      </device>
   </devices>
</config-template>
[root@dmz-nso01 src]#